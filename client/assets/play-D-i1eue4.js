import{w as g}from"./with-props-Cr-61YSs.js";import{a as u,o as f}from"./chunk-D4RADZKF-Dgj59hC6.js";let a,p=0,d=null;function w(){return(d===null||d.byteLength===0)&&(d=new Uint8Array(a.memory.buffer)),d}const b=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},x=typeof b.encodeInto=="function"?function(e,t){return b.encodeInto(e,t)}:function(e,t){const n=b.encode(e);return t.set(n),{read:e.length,written:n.length}};function _(e,t,n){if(n===void 0){const c=b.encode(e),l=t(c.length,1)>>>0;return w().subarray(l,l+c.length).set(c),p=c.length,l}let s=e.length,r=t(s,1)>>>0;const o=w();let i=0;for(;i<s;i++){const c=e.charCodeAt(i);if(c>127)break;o[r+i]=c}if(i!==s){i!==0&&(e=e.slice(i)),r=n(r,s,s=i+e.length*3,1)>>>0;const c=w().subarray(r+i,r+s),l=x(e,c);i+=l.written,r=n(r,s,i,1)>>>0}return p=i,r}const y=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&y.decode();function h(e,t){return e=e>>>0,y.decode(w().subarray(e,e+t))}function T(e){let t,n;try{const s=_(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=p,o=a.wasm_eval(s,r);return t=o[0],n=o[1],h(o[0],o[1])}finally{a.__wbindgen_free(t,n,1)}}async function A(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(s){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",s);else throw s}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function R(){const e={};return e.wbg={},e.wbg.__wbindgen_init_externref_table=function(){const t=a.__wbindgen_export_0,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e}function q(e,t){return a=e.exports,m.__wbindgen_wasm_module=t,d=null,a.__wbindgen_start(),a}async function m(e){if(a!==void 0)return a;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/assets/weblisp_compiler_bg-8VSsAb6p.wasm",import.meta.url));const t=R();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:s}=await A(await e,t);return q(n,s)}const v="/assets/weblisp_compiler_bg-8VSsAb6p.wasm",E=`
(def sqrt (x) (
    (def inner_sqrt (x n) (
        (let n_squared (* n n))
        (if (= n_squared x)
            n
            (if (> n_squared x)
                (- n 1)
                (inner_sqrt x (+ n 1))
            )
        )
    ))
    (inner_sqrt x 0)
))

(sqrt 0)
(sqrt 1)
(sqrt 4)
(sqrt 10)
`.slice(1);function N({}){return[{title:"Play"},{name:"description",content:"Play with Weblisp!"}]}async function S(e){return await m(v),T(e)}async function W(e,t){if(t.current){const n=await S(e);t.current.textContent=n}}const V=g(function(){const[t,n]=u.useState(""),s=u.useRef(null),r=u.useRef(null);return u.useEffect(()=>{const o=localStorage.getItem("inputValue");n(o??E)},[]),u.useEffect(()=>(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{localStorage.setItem("inputValue",t)},200),()=>{r.current&&clearTimeout(r.current)}),[t]),f.jsxs("div",{className:"flex flex-col h-screen w-full",children:[f.jsx("header",{className:"w-full h-20 p-2",children:f.jsx("button",{className:"border w-16 h-8",onClick:()=>W(t,s),children:"Run"})}),f.jsxs("section",{className:"flex w-full h-full font-mono px-2 gap-8",children:[f.jsx("textarea",{className:"w-1/2 h-full resize-none",spellCheck:"false",value:t,onChange:o=>n(o.currentTarget.value)}),f.jsx("div",{className:"w-1/2 h-full whitespace-pre-wrap",ref:s})]}),f.jsx("footer",{className:"w-full h-20 p-2",children:"Made with <3 using Rust"})]})});export{V as default,N as meta};
